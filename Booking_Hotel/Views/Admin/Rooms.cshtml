@model List<Booking_Hotel.Models.Room>

@{
    ViewData["Title"] = "Quản Lý Phòng";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

@section Styles {
    <link rel="stylesheet" href="~/css/admin-table.css" asp-append-version="true" />
}

<div class="page-container">
    <div class="page-header">
        <div class="header-left">
            <h1 class="page-title">🏨 Quản Lý Phòng</h1>
            <p class="page-subtitle">Quản lý tất cả phòng trong hệ thống</p>
        </div>
        <div class="header-right">
            
            <button class="btn-primary" onclick="openAddRoomModal()">
                ➕ Thêm Phòng
            </button>
        </div>
    </div>

    <div class="filter-section">
        <div class="filter-group">
            <input type="text" id="searchInput" class="filter-input" placeholder="🔍 Tìm kiếm theo tên phòng..." />
           
        </div>
        <select id="branchFilter" class="filter-select">
            <option value="">Tất cả chi nhánh</option>
            <option value="Cần Thơ">Cần Thơ</option>
            <option value="TP Hồ Chí Minh">TP.HCM</option>
            <option value="Hà Nội">Hà Nội</option>
        </select>

        <div class="filter-group">
            <select id="typeFilter" class="filter-select">
                <option value="">Tất cả loại phòng</option>
                <option value="Standard">Standard</option>
                <option value="Deluxe">Deluxe</option>
                <option value="Suite">Suite</option>
            </select>
        </div>
        <div class="filter-group">
            <select id="statusFilter" class="filter-select">
                <option value="">Tất cả trạng thái</option>
                <option value="available">Còn trống</option>
                <option value="booked">Đã đặt</option>
                <option value="maintenance">Bảo trì</option>
            </select>
        </div>
    </div>

    <div class="table-card">
        <table class="data-table" id="roomsTable">
            <thead>
                <tr>
                    <th>
                        <input type="checkbox" id="selectAll" />
                    </th>
                    <th>ID</th>
                    <th>Hình Ảnh</th>
                    <th>Tên Phòng</th>
                    <th>Chi Nhánh</th>
                    <th>Loại Phòng</th>
                    <th>Giá/Đêm</th>
                    <th>Trạng Thái</th>
                    <th>Thao Tác</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var room in Model)
                {
                    <tr>
                        <td><input type="checkbox" /></td>

                        <td>#@room.RoomId</td>

                        <td>
                            <img src="@(string.IsNullOrEmpty(room.ImageUrl)
                                                         ? "https://via.placeholder.com/80x60?text=Room"
                                                         : room.ImageUrl)"
                             class="room-thumbnail" />
                    </td>

                        <td><strong>@room.RoomName</strong></td>

                        <td>@room.Branch?.BranchName</td>

                        <td>
                            <span class="type-badge @(room.RoomType?.ToLower() ?? "standard")">
                                @(room.RoomType ?? "Standard")
                            </span>
                        </td>

                        <td>@room.Price.ToString("N0") ₫</td>

                        <td>
                            <span class="status-badge @room.Status.ToLower()">
                                @room.Status
                            </span>
                        </td>

                        <td>
                            <div class="action-buttons">
                                <button class="btn-action view" onclick="viewRoom(@room.RoomId)">👁️</button>
                                <button class="btn-action edit" onclick="editRoom(@room.RoomId)">✏️</button>
                                <button class="btn-action delete" onclick="deleteRoom(@room.RoomId)">🗑️</button>
                            </div>
                        </td>
                    </tr>
                                }
            </tbody>

        </table>
    </div>

    <div class="pagination">
        <button class="page-btn" disabled>‹ Trước</button>
        <button class="page-btn active">1</button>
        <button class="page-btn">2</button>
        <button class="page-btn">3</button>
        <button class="page-btn">Sau ›</button>
    </div>
</div>

<div class="modal" id="roomModal">
    <div class="modal-overlay" onclick="closeRoomModal()"></div>
    <div class="modal-content large">
        <div class="modal-header">
            <h3 id="modalTitle">➕ Thêm Phòng Mới</h3>
            <button class="modal-close" onclick="closeRoomModal()">✕</button>
        </div>
        <div class="modal-body">
            <form id="roomForm">
                <input type="hidden" id="roomId" />

                <div class="form-row">
                    <div class="form-group">
                        <label>Tên Phòng *</label>
                        <input type="text" id="roomName" class="form-control" required />
                    </div>

                    <div class="form-group">
                        <label>Chi Nhánh *</label>
                        <select id="branchId" class="form-control" required>
                            <option value="">Chọn chi nhánh</option>
                            <option value="1">Cần Thơ</option>
                            <option value="2">TP.HCM</option>
                            <option value="3">Hà Nội</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Loại Phòng *</label>
                        <select id="roomType" class="form-control" required>
                            <option value="">Chọn loại phòng</option>
                            <option value="Standard">Standard</option>
                            <option value="Deluxe">Deluxe</option>
                            <option value="Suite">Suite</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Giá / Đêm *</label>
                            <input type="number" id="price" class="form-control" required />
                        </div>

                        <div class="form-group">
                            <label>Sức chứa *</label>
                            <input type="number" id="capacity" class="form-control" required />
                        </div>
                    </div>


                <div class="form-group">
                    <label>Trạng Thái *</label>
                        <select id="status" class="form-control">
                            <option value="Available">Còn trống</option>
                            <option value="Booked">Đã đặt</option>
                            <option value="Maintenance">Bảo trì</option>
                        </select>

                </div>

                <div class="form-group">
                    <label>Hình Ảnh URL</label>
                    <input type="text" id="imageUrl" class="form-control" placeholder="/images/rooms/..." />
                </div>

                <div class="form-group">
                    <label>Mô Tả</label>
                    <textarea id="description" class="form-control" rows="4"></textarea>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeRoomModal()">Hủy</button>
            <button class="btn-primary" onclick="saveRoom()">Lưu</button>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/admin-rooms.js" asp-append-version="true"></script>
}