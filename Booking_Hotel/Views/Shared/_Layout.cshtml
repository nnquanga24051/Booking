@using Microsoft.AspNetCore.Http

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Booking_Hotel</title>

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/Booking_Hotel.styles.css" asp-append-version="true" />
</head>
<body>
    <div class="container-fluid p-0">
        <!-- HEADER -->
        <div class="item header d-flex justify-content-between align-items-center px-4">
            <h4 class="mb-0">🏨 Booking Hotel</h4>

            <nav>
                <a class="text-white me-3" href="/">Home</a>
                <a class="text-white me-3" href="/Home/Booking">Booking</a>
                <a class="text-white me-3" href="/Home/About">About</a>
                <a class="text-white me-3" href="/Home/Contact">Contact</a>
                @* <a class="btn btn-outline-light btn-sm"
                   asp-controller="Authentications"
                   asp-action="Login">
                    Login
                </a>
                <a class="btn btn-outline-light btn-sm"
                   asp-controller="Authentications"
                   asp-action="Register">
                    Register
                </a> *@
                @{
                    var userId = Context.Session.GetInt32("UserId");
                    var username = Context.Session.GetString("Username");
                    var email = Context.Session.GetString("Email");
                    var fullName = Context.Session.GetString("FullName");
                }

                @if (userId == null)
                {
                    <!-- CHƯA ĐĂNG NHẬP -->
                    <a class="btn btn-outline-light btn-sm me-2"
                       asp-controller="Authentications"
                       asp-action="Login">
                        Login
                    </a>
                    <a class="btn btn-outline-light btn-sm"
                       asp-controller="Authentications"
                       asp-action="Register">
                        Register
                    </a>
                }
                else
                {
                    <!-- ĐÃ ĐĂNG NHẬP -->
                    <div class="dropdown d-inline-block">
                        <a class="text-white dropdown-toggle"
                           href="#"
                           id="userDropdown"
                           role="button"
                           data-bs-toggle="dropdown"
                           aria-expanded="false">
                            👤 @username
                        </a>

                        <ul class="dropdown-menu dropdown-menu-end p-3"
                            aria-labelledby="userDropdown"
                            style="min-width: 250px;">
                            <li class="mb-2">
                                <strong>@username</strong><br />
                                <small class="text-muted">@email</small>
                            </li>
                            <li><hr class="dropdown-divider" /></li>
                            <li class="mb-2">
                                <strong>@fullName</strong><br />
                                <small class="text-muted">@email</small>
                            </li>

                            <li>
                                <a class="dropdown-item text-danger"
                                   asp-controller="Authentications"
                                   asp-action="Logout">
                                    Logout
                                </a>
                            </li>
                        </ul>
                    </div>
                }
            </nav>
        </div>

         


            <!-- CONTENT -->
            <div class="item content flex-grow-1">
                @RenderBody()
            </div>
        </div>

        <!-- FOOTER -->
        <div class="item footer text-center">
            © 2026 Booking Hotel | Contact: booking@gmail.com
        </div>
     
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
